<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="This is my fisrt blog to record my life and thoughts">
<meta property="og:type" content="website">
<meta property="og:title" content="Something for Nothing">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Something for Nothing">
<meta property="og:description" content="This is my fisrt blog to record my life and thoughts">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Something for Nothing">
<meta name="twitter:description" content="This is my fisrt blog to record my life and thoughts">





  
  
  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Something for Nothing</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?06239ee536846cb250954a8e2461b523";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Something for Nothing</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">I just want peace and love</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/16/初识web架构演变/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wangggod">
      <meta itemprop="description" content="This is my fisrt blog to record my life and thoughts">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something for Nothing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/16/初识web架构演变/" class="post-title-link" itemprop="url">初识web架构演变</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-16 21:02:49" itemprop="dateCreated datePublished" datetime="2019-04-16T21:02:49+08:00">2019-04-16</time>
            

            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/04/16/初识web架构演变/" class="leancloud_visitors" data-flag-title="初识web架构演变">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- wp:paragraph -->
<p></p><p>这几天翻出了一本许久没有打开的《spring2+spring3+hibernate》，饶有兴趣研究了web架构的演变，花了半小时时间画了个思维导图帮助记忆，这阶段就先按照第一个版本的导图扩充一下知识树吧。这里感谢以下两篇文章给我的帮助：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650763749&amp;idx=1&amp;sn=74b4fea08061fde4e5cee4dca47246ce&amp;chksm=f3f9c470c48e4d665e15ee6e156ca2a42d18a71cacefd0d07acba4e85259b65b34631a641628&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650763749&amp;idx=1&amp;sn=74b4fea08061fde4e5cee4dca47246ce&amp;chksm=f3f9c470c48e4d665e15ee6e156ca2a42d18a71cacefd0d07acba4e85259b65b34631a641628&amp;scene=21#wechat_redirect</a><a href="https://www.cnblogs.com/xiaoMzjm/p/5223799.html" target="_blank" rel="noopener"> </a></p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p><a href="https://www.cnblogs.com/xiaoMzjm/p/5223799.html" target="_blank" rel="noopener">https://www.cnblogs.com/xiaoMzjm/p/5223799.html</a></p><br><!-- /wp:paragraph --><p></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>前言</p><cite> <br>首先我们先弄清楚，web架构会演变都是为了提供更好的服务，而已有的架构无法满足，因此而进行的改良。而在整个架构的演变中，改良方面总共有以下几点： <br> 1、单台服务器性能<br>2、服务器数量<br>3、数据库数量<br>4、针对数据库的优化<br>5、针对应用的优化 <br><br>  所有框架的演变基本都是基于以上五点，接下来我们从最开始讲起。 </cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>一、单机建站。</p><cite> <br>最开始的时候构建web项目只需要一台服务器即可，将应用、文件、数据都扔在一台服务器上跑就行了。如：容器（非必须）+JSP/Servlet+框架（如Spring+maven+struct+hibernate）+数据库管理系统（如mysql）-&gt;用JDBC进行数据库管理连接。 </cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>二、服务分离</p><p></p><cite>随着功能和访问量的增加，适当把服务进行分离可以优化性能。如在容器前增加NGINX实现反向代理；或者用nginx实现静态文件处理，Tomcat实现动态编译等等。这几点属于单宿主机上的服务分离，此时提升性能主要依靠提升单台服务器性能。此时可以再增加一台服务器，<strong><em>实现应用和数据库分离 。</em></strong></cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>三、应用服务集群</p><p></p><cite>在第二点的前提下，假设数据库服务器的压力不大，但引用服务器压力增加，此时则出现了应用服务集群，即设立多台应用服务器，彼此之间没有交互，形成一个集群共同提供服务。而集群可以分为高可用集群、负载均衡集群、科学计算集群。采用集群结构之后，面临了四个问题，即：<br><br>1、用户的请求由谁来转发到到具体的应用服务器<br> 2、有什么转发的算法<br> 3、应用服务器如何返回用户的请求<br> 4、用户如果每次访问到的服务器不一样，那么如何维护session的一致性<br>解决方案引用链接2的说明：<br><br> <br>1、第一个问题即是负载均衡的问题，一般有5种解决方案：<br>　　　　1、<strong>http重定向</strong>。HTTP重定向就是应用层的请求转发。用户的请求其实已经到了HTTP重定向负载均衡服务器，服务器根据算法要求用户重定向，用户收到重定向请求后，再次请求真正的集群<br>　　　　　　优点：简单。<br>　　　　　　缺点：性能较差。<br>　　　　2、<strong>DNS域名解析负载均衡</strong>。DNS域名解析负载均衡就是在用户请求DNS服务器，获取域名对应的IP地址时，DNS服务器直接给出负载均衡后的服务器IP。<br>　　　　　　优点：交给DNS，不用我们去维护负载均衡服务器。<br>　　　　　　缺点：当一个应用服务器挂了，不能及时通知DNS，而且DNS负载均衡的控制权在域名服务商那里，网站无法做更多的改善和更强大的管理。<br>　　　　3、<strong>反向代理服务器</strong>。在用户的请求到达反向代理服务器时（已经到达网站机房），由反向代理服务器根据算法转发到具体的服务器。常用的apache，nginx都可以充当反向代理服务器。<br>　　　　　　优点：部署简单。<br>　　　　　　缺点：代理服务器可能成为性能的瓶颈，特别是一次上传大文件。<br>　　　　4、<strong>IP层负载均衡</strong>。在请求到达负载均衡器后，负载均衡器通过修改请求的目的IP地址，从而实现请求的转发，做到负载均衡。<br>　　　　　　优点：性能更好。<br>　　　　　　缺点：负载均衡器的宽带成为瓶颈。<br>　　　　5、<strong>数据链路层负载均衡</strong>。在请求到达负载均衡器后，负载均衡器通过修改请求的mac地址，从而做到负载均衡，与IP负载均衡不一样的是，当请求访问完服务器之后，直接返回客户。而无需再经过负载均衡器。<br>&nbsp;<br>　　2、第二个问题即是集群调度算法问题，常见的调度算法有10种。<br>　　　　1、<strong>rr 轮询调度算法</strong>。顾名思义，轮询分发请求。<br>　　　　　　优点：实现简单<br>　　　　　　缺点：不考虑每台服务器的处理能力<br>　　　　2、<strong>wrr 加权调度算法</strong>。我们给每个服务器设置权值weight，负载均衡调度器根据权值调度服务器，服务器被调用的次数跟权值成正比。<br>　　　　　　优点：考虑了服务器处理能力的不同<br>　　　　3、<strong>sh 原地址散列</strong>：提取用户IP，根据散列函数得出一个key，再根据静态映射表，查处对应的value，即目标服务器IP。过目标机器超负荷，则返回空。<br>　　　　4、<strong>dh 目标地址散列</strong>：同上，只是现在提取的是目标地址的IP来做哈希。<br>　　　　　　优点：以上两种算法的都能实现同一个用户访问同一个服务器。<br>　　　　5、<strong>lc 最少连接</strong>。优先把请求转发给连接数少的服务器。<br>　　　　　　优点：使得集群中各个服务器的负载更加均匀。<br>　　　　6、<strong>wlc 加权最少连接</strong>。在lc的基础上，为每台服务器加上权值。算法为：（活动连接数<em>256+非活动连接数）÷权重 ，计算出来的值小的服务器优先被选择。<br>　　　　　　优点：可以根据服务器的能力分配请求。<br>　　　　7、<strong>sed 最短期望延迟</strong>。其实sed跟wlc类似，区别是不考虑非活动连接数。算法为：（活动连接数+1)</em>256÷权重，同样计算出来的值小的服务器优先被选择。<br>　　　　8、<strong>nq 永不排队</strong>。改进的sed算法。我们想一下什么情况下才能“永不排队”，那就是服务器的连接数为0的时候，那么假如有服务器连接数为0，均衡器直接把请求转发给它，无需经过sed的计算。<br>　　　　9、<strong>LBLC 基于局部性的最少连接</strong>。均衡器根据请求的目的IP地址，找出该IP地址最近被使用的服务器，把请求转发之，若该服务器超载，最采用最少连接数算法。<br>　　　　10、<strong>LBLCR 带复制的基于局部性的最少连接</strong>。均衡器根据请求的目的IP地址，找出该IP地址最近使用的“服务器<strong>组</strong>”，注意，并不是具体某个服务器，然后采用最少连接数从该组中挑出具体的某台服务器出来，把请求转发之。若该服务器超载，那么根据最少连接数算法，在集群的<strong>非</strong>本服务器组的服务器中，找出一台服务器出来，加入本服务器组，然后把请求转发之。<br>&nbsp;<br>　　3、第三个问题是集群模式问题，一般3种解决方案：<br>　　　　1、<strong>NAT</strong>：负载均衡器接收用户的请求，转发给具体服务器，服务器处理完请求返回给均衡器，均衡器再重新返回给用户。<br>　　　　2、<strong>DR</strong>：负载均衡器接收用户的请求，转发给具体服务器，服务器出来玩请求后直接返回给用户。需要系统支持IP Tunneling协议，难以跨平台。<br>　　　　3、<strong>TUN</strong>：同上，但无需IP Tunneling协议，跨平台性好，大部分系统都可以支持。<br>&nbsp;<br>　　4、第四个问题是session问题，一般有4种解决方案：<br>　　　　1、<strong>Session Sticky</strong>。session sticky就是把同一个用户在某一个会话中的请求，都分配到固定的某一台服务器中，这样我们就不需要解决跨服务器的session问题了，常见的算法有ip_hash法，即上面提到的两种散列算法。<br>　　　　　　优点：实现简单。<br>　　　　　　缺点：应用服务器重启则session消失。<br>　　　　2、<strong>Session Replication</strong>。session replication就是在集群中复制session，使得每个服务器都保存有全部用户的session数据。<br>　　　　　　优点：减轻负载均衡服务器的压力，不需要要实现ip_hasp算法来转发请求。<br>　　　　　　缺点：复制时宽带开销大，访问量大的话session占用内存大且浪费。<br>　　　　3、<strong>Session数据集中存储</strong>：session数据集中存储就是利用数据库来存储session数据，实现了session和应用服务器的解耦。<br>　　　　　　优点：相比session replication的方案，集群间对于宽带和内存的压力减少了很多。<br>　　　　　　缺点：需要维护存储session的数据库。<br>　　　　4、<strong>Cookie Base</strong>：cookie base就是把session存在cookie中，有浏览器来告诉应用服务器我的session是什么，同样实现了session和应用服务器的解耦。<br>　　　　　　优点：实现简单，基本免维护。<br>　　　　　　缺点：cookie长度限制，安全性低，宽带消耗。<br>　　<br>　　<strong>值得一提的是</strong>：<br>　　nginx目前支持的负载均衡算法有wrr、sh（支持一致性哈希）、fair（本人觉得可以归结为lc）。但nginx作为均衡器的话，还可以一同作为静态资源服务器。<br>　　keepalived+ipvsadm比较强大，目前支持的算法有：rr、wrr、lc、wlc、lblc、sh、dh<br>　　keepalived支持集群模式有：NAT、DR、TUN<br>　　nginx本身并没有提供session同步的解决方案，而apache则提供了session共享的支持。 </cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>四、数据库读写分离</p><p></p><cite>在第三点中我们假设数据库并没有压力。此时的情况是数据库开始出现性能不够，且单纯增加数据库服务器的数量只能解决存储容量而不能解决运算效率。因此出现了数据库读写分离，即一部分数据库专门负责写，一部分专门负责读。随之而来的问题是：1、主从数据库之间数据同步问题<br> 2、应用对于数据源的选择问题<br>这里的解决方案是：1、我们可以使用MYSQL自带的master+slave的方式实现主从复制。<br> 2、采用第三方数据库中间件，例如mycat。mycat是从cobar发展而来的，而cobar是阿里开源的数据库中间件，后来停止开发。mycat是国内比较好的mysql开源数据库分库分表中间件</cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>五、搜索引擎引入</p><cite>在数据库读写分离之后，性能瓶颈主要来自于读操作。比如大量用户同时访问一个数据，读操作缓慢。因此引入了搜索引擎，<strong><em>来提升读操作的效率</em></strong>。随之而来的问题是：引入搜索引擎后也会带来以下的开销：<br> 带来大量的维护工作，我们需要自己实现索引的构建过程，设计全量/增加的构建方式来应对非实时与实时的查询需求。<br> 需要维护搜索引擎集群</cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>六、缓存优化</p><cite>缓存优化和第五点一样都是为了解决数据库读操作的问题。缓存优化又分为：<br>1、后台应用层和数据库的缓存：随着访问量的增加，逐渐出现了许多用户访问同一部分内容的情况，对于这些比较热门的内容，没必要每次都从数据库读取。我们可以使用缓存技术，例如可以使用google的开源缓存技术guava或者使用memcacahe作为应用层的缓存，也可以使用redis作为数据库层的缓存。<br> 　　另外，在某些场景下，关系型数据库并不是很适合，例如我想做一个“每日输入密码错误次数限制”的功能，思路大概是在用户登录时，如果登录错误，则记录下该用户的IP和错误次数，那么这个数据要放在哪里呢？假如放在内存中，那么显然会占用太大的内容；假如放在关系型数据库中，那么既要建立数据库表，还要简历对应的java bean，还要写SQL等等。而分析一下我们要存储的数据，无非就是类似{ip:errorNumber}这样的key:value数据。对于这种数据，我们可以用NOSQL数据库来代替传统的关系型数据库。<br>2、页面缓存：除了数据缓存，还有页面缓存。比如使用HTML5的localstroage或者cookie。<br>且优缺点如下：<br><br>　　优点：<br> 减轻数据库的压力<br> 大幅度提高访问速度<br> 　　缺点：<br> 需要维护缓存服务器<br> 提高了编码的复杂性</cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>七、数据库拆分</p><p></p><cite>五、六两点都是为了解决数据库读操作的问题，仅在算法上进行优化。而结构上优化则为对数据库进行拆分，分为垂直拆分和水平拆分。<br>一、垂直拆分： <br>垂直拆分的意思是把数据库中不同的业务数据拆分道不同的数据库中，结合现在的例子，就是把交易、商品、用户的数据分开。<br><strong>　　优点</strong>：<br>解决了原来把所有业务放在一个数据库中的压力问题。<br>可以根据业务的特点进行更多的优化<br>&nbsp;<br><strong>　　缺点</strong>：<br>需要维护多个数据库<br>&nbsp;<br><strong>　　问题</strong>：<br>需要考虑原来跨业务的事务<br>跨数据库的join<br><strong>　　解决问题方案</strong>：<br>我们应该在应用层尽量避免跨数据库的事物，如果非要跨数据库，尽量在代码中控制。<br>我们可以通过第三方应用来解决，如上面提到的mycat，mycat提供了丰富的跨库join方案，详情可参考mycat官方文档。 <br><br>二、水平拆分：<br><br> <br>数据水平拆分就是把同一个表中的数据拆分到两个甚至多个数据库中。产生数据水平拆分的原因是某个业务的数据量或者更新量到达了单个数据库的瓶颈，这时就可以把这个表拆分到两个或更多个数据库中。<br><strong>　　优点</strong>：<br>如果我们能客服以上问题，那么我们将能够很好地对数据量及写入量增长的情况。<br>&nbsp;<br><strong>　　问题</strong>：<br>访问用户信息的应用系统需要解决SQL路由的问题，因为现在用户信息分在了两个数据库中，需要在进行数据操作时了解需要操作的数据在哪里。<br>主键的处理也变得不同，例如原来自增字段，现在不能简单地继续使用了。<br>如果需要分页，就麻烦了。<br><strong>　　解决问题方案</strong>：<br>我们还是可以通过可以解决第三方中间件，如mycat。mycat可以通过SQL解析模块对我们的SQL进行解析，再根据我们的配置，把请求转发到具体的某个数据库。<br>我们可以通过UUID保证唯一或自定义ID方案来解决。<br>mycat也提供了丰富的分页查询方案，比如先从每个数据库做分页查询，再合并数据做一次分页查询等等。 <br><strong><em><br>注意：这里的数据库拆分和前面的读写分离不是同一个东西</em></strong><br><br><br></cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>八、应用拆分</p><cite>除了能将数据库拆分，现在还能将应用服务器也进行拆分。可以按照应用服务不同进行拆分，也可以按照服务化的思想拆分。</cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:pullquote -->
<p><figure class="wp-block-pullquote"><blockquote><p>九、引入消息中间件</p><cite> <br>随着网站的继续发展，我们的系统中可能出现不同语言开发的子模块和部署在不同平台的子系统。此时我们需要一个平台来传递可靠的，与平台和语言无关的数据，并且能够把负载均衡透明化，能在调用过程中收集调用数据并分析之，推测出网站的访问增长率等等一系列需求，对于网站应该如何成长做出预测。开源消息中间件有阿里的dubbo，可以搭配Google开源的分布式程序协调服务zookeeper实现服务器的注册与发现。 </cite></blockquote></figure><br><!-- /wp:pullquote --></p>
<!-- wp:paragraph -->
<p></p><p>以上仅仅是今天我初步摸索的结果，关系图大致如下：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":167} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/image-6-1024x298.png" alt class="wp-image-167"></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>日后继续补充，包括微服务等部分还需要完善</p><br><!-- /wp:paragraph --><p></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/15/《1984》——剥离了思想，你还剩什么/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wangggod">
      <meta itemprop="description" content="This is my fisrt blog to record my life and thoughts">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something for Nothing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/15/《1984》——剥离了思想，你还剩什么/" class="post-title-link" itemprop="url">《1984》——剥离了思想，你还剩什么</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-15 20:12:30" itemprop="dateCreated datePublished" datetime="2019-04-15T20:12:30+08:00">2019-04-15</time>
            

            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/04/15/《1984》——剥离了思想，你还剩什么/" class="leancloud_visitors" data-flag-title="《1984》——剥离了思想，你还剩什么">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- wp:paragraph -->
<p></p><p>说来惭愧，还在高中写议论文那会，我就经常会引用《1984》里面的名句来给自己的作文升华主题。结果到了大三的时候我才第一次完完整整看完了整本书，实在是对不起这么好的一部作品。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>书籍以温斯顿为主人公展开，一个在极度压抑情况的社会环境中思想深处抵抗着老大哥的普通人，从蠢蠢欲动，到找到伴侣相互取暖，最后却还是没能逃过老大哥的注视，被改造成这个社会的一个齿轮。全书篇幅不长，一口气便看完了。合上书的那一刻我除了还有点惊愕，剧情戛然而止，可是回味起来却又是恰到刚好。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“老大哥在看着你”，这个短句从文章的开篇就被反复施以笔墨。乔治奥维尔仅仅了几页篇幅便将整个压抑的社会氛围渲染得如浓雾一般，渗透蔓延到了现实世界。这是怎样一个世界？所有的地方都装着用来监视的电屏，关不掉，躲不开；破旧的城市穿行着忙碌的人民“为老大哥工作”；在电屏和无处不在的思想警察的双重施压下，人不能有任何隐私，不敢轻易拥有情感，甚至连三餐都是奢望。极其糟糕的酒和餐品，供应不足的巧克力，肃杀的寒风…这是多么可怕的社会。而这一切的源头，都是“老大哥正在看着你”。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>而老大哥的注视，都是为了控制住所有人民的行动和思。老大哥告诉所有人，我们的帝国战无不胜、所有物资产量又超额完成了百分之九百、我们的社会比以前更好了。也许有人会质疑这一切的真实性，就像温斯顿那样“背着电屏凝望着这个城市”。但当所有的消息来源都是老大哥控制，你便无从知道现在国家在同什么人打仗以及战况如何；当你的生活范围被监视控制，只能在有限范围内按照国家分配和安排苟活着，你就不能甚至不敢去质疑生活有没有变好，因为活着已经变成了不由自己控制的事情。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>最可怕的是，当你记忆中的历史被反复修改，重写甚至抹除，在这样的压抑下你终究会怀疑是不是自己的脑子出了问题。或许就像温斯顿那样，他在梦中想起了自己母亲的离开，可是梦醒之后看着一切，“又怀疑是不是自己记错了”。记忆无处躲藏，因为对照已经不存在。现世中找不到任何和过去某件物品有关的东西时，当这个物品的概念开始被人民逐渐遗忘，直到最后一个人忘记的时候，那么它就真的不存在了。历史也是如此下场。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>温斯顿便是这样怀疑着，犹豫着。他心里抗拒着电屏，抗拒着老大哥，却又不得不在仇恨会上和大伙一样，“混杂着恐惧感和报复欲的快感，对杀戮、虐待、用大锤痛殴他人面部的渴望如电流一般通过人群，促使你背离自己的本意，变成一个面容扭曲、高声叫喊的疯子”。尽管此时他的愤怒转移到了老大哥和思想警察身上，可是又能如何？他还是会惧怕一个眼神的飘忽会让思想警察把他揪出来。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>在这样的压抑下，动物原始的本能和人的理智在天平持平。机械的活着，得不到满足的性欲，填不饱的肚子，很难想象这样的社会竟然没有发生起义和暴动？为什么没有星星之火进而燃遍世界？作者也逐渐揭开这压抑背后的错综复杂——传说存在的兄弟会，让温斯顿产生反抗希望的奥布兰，坠入爱河的朱丽娅，旧时代的怀念者查林顿先生，在绝望中看到的光总是会让人奋不顾身。这些光维持着温斯顿的内在平衡，而这或许也是没有人发生起义的原因之一——在你绝望的时候总会给你点希望去放弃所有反抗。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>而故事推向终章，却是在从把这一丝微弱的光掐灭开始——那个温斯顿和朱丽娅的相拥取暖躲避现实的旧楼，其实早已被监视；墙上美好的挂画，友善的查林顿房东，都是背后主谋奥布兰一手策划——那个告诉告诉温斯顿“我们会在没有黑暗的地方相遇”的男人。锒铛入狱，和朱丽娅诀别，惨遭酷刑，温斯顿都一遍又一遍告诉思想警察们“你们控制不了我的思想，我还爱着朱丽娅不会背叛”，但最后却还是在101号房间，温斯顿放弃了自己坚守的所有思想，选择像野兽一样卑微的活下去。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>最后温斯顿自由了，不会在有思想警察监视他了，电屏也不需要了，因为他已经成为了这个社会的一个齿轮——“自由即奴役”。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>乔治奥威尔的笔法着实精妙，他先是构建出一个压抑但看似有漏洞的社会，让人在压抑中抱有希望，详细描绘了希望的形状后又狠狠掐断这一切，让人窒息。故事不必再多写，温斯顿已经被改造了。也许在这样的世界里还有无穷多个的温斯顿，但一个和无穷个又有什么区别呢？“一切都隐遁到迷雾里。过去被清除，清除的行为本身也被遗忘，谎言成为真理”，活着的温斯顿们会被改造，随后他们也会去改造剩下的温斯顿们。而至于新生出来的人，过去已经被清除了，他们生出来就是完美的，为了老大哥而生，不再需要改造。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>读完之后我有太多话想说，却又不知道从什么地方说起，只有压抑。思来想去，只感慨到自己不是生在这样的社会。我素来知道思想是可以被潜移默化改变的，但是我从来没有想过思想是否真的能完完全全被自己保有。譬如我们的思想如果没能引起共鸣，看不到有同样想法的人，你还会抱有这个思想吗？我们翻看历史，那些起义的人民，都是以群体方式出现，他们有着同样的思想并且聚在了一起相互交流，最终引起质变。而如果所有个体都被隔离开，你的所有思想都只能存在脑内，除此再也看不见任何类似的东西，听不到任何回音，那么它还能存活多久？</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>思想的寒冬，才是社会的终章啊。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>——2019.4.15</p><br><!-- /wp:paragraph --><p></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/13/下次VPS升级前一定要记得先备份，最好先睁开眼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wangggod">
      <meta itemprop="description" content="This is my fisrt blog to record my life and thoughts">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something for Nothing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/13/下次VPS升级前一定要记得先备份，最好先睁开眼/" class="post-title-link" itemprop="url">下次VPS升级前一定要记得先备份，最好先睁开眼</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-13 18:20:21" itemprop="dateCreated datePublished" datetime="2019-04-13T18:20:21+08:00">2019-04-13</time>
            

            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/04/13/下次VPS升级前一定要记得先备份，最好先睁开眼/" class="leancloud_visitors" data-flag-title="下次VPS升级前一定要记得先备份，最好先睁开眼">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- wp:paragraph -->
<p></p><p>写下标题的时候我是颤抖着的，因为我的一个无操作，差点就回不来这里了。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>这周一直在倒腾WordPress，按照网上的教程和记忆中依稀残存的关于Nginx和php的知识，我凑出了现在眼前的这个网站。不得不说Nginx+mysql+php这套配置着实比用Apache+MySQL+php稍微复杂那么一丢丢。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>总归是能用了，结果我再次陷入了“程序员不需要视力”的危机…事情的起因是我发现我的WordPress主题不能自定义一个模板。具体表现为：新建一个页面的时候没有看到有“模板”这个选项。在网上搜罗了一圈，发现普遍反映的可能性有两个：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:preformatted -->
<p><pre class="wp-block-preformatted">1、php.ini这个配置文件中禁用了scandir函数，导致不能扫描读取。<br>2、自己新建的模板文件没有按照文档要求的在开头加上表示注释，没有被成功读取<br></pre><br><!-- /wp:preformatted --></p>
<!-- wp:paragraph -->
<p></p><p>思索了三秒我盲猜第二个实现难度比较低，也比较容易验证，所以就在自己刚刚写的模板文件开头按照江湖配方加上了神秘注释：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>&lt;?php /<em> Template Name: test </em>/ ?&gt;</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>这个配方的用法是先在当前主题的文件夹内新建一个.php文件，然后这个文件的最顶部加上这句话就可以让WordPress识别出这个是个模板，然后你就能在WordPress后台-外观-编辑主题-右上角选择你的主题，然后就能在界面右边看到你新建的文件。如下图：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":139} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/image-2-1024x340.png" alt class="wp-image-139"></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>我先按照方法二，在我的vps上新建了一个模板文件命名为video，在下图的右下角</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":140} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/image-3-1024x51.png" alt class="wp-image-140"><figcaption>大家一定要注意观察我这张图的，它坑了我整整一下午…</figcaption></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>然而操作完之后我还是没有在网站的后台管理那里看到这个文件，于是我开始尝试第一个情况，即php.ini禁用函数。在网上搜罗的时候看到有人问怎么知道这个php.ini放在哪，第一个方法你可以直接用find指令</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>例1：查找tomcat7文件夹所在的位置</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:code -->
<p><pre class="wp-block-code"><code>find / -name ‘tomcat7’ -type d<br></code></pre><br><!-- /wp:code --></p>
<!-- wp:paragraph -->
<p></p><p>例2：查找server.xml文件的位置</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:code -->
<p><pre class="wp-block-code"><code>find / -name ‘server.xml’ -print</code></pre><br><!-- /wp:code --></p>
<!-- wp:paragraph -->
<p></p><p>第二个方法你可以访问你建站时候的探针网址，就是<a href="http://xxxxxx/info.php这个页面" target="_blank" rel="noopener">http://xxxxxx/info.php这个页面</a></p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":141} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/image-4.png" alt class="wp-image-141"><figcaption>写得清清楚楚</figcaption></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>然后通过vim指令，找到disable_function这个关键字，所有被禁用的函数都会在这个关键字后面。问题又出现了，我的php.ini中甚至没有出现scandir这个函数，甚至整个文件中都找不到…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>陷入僵局。我又开始在网上漫无目的地搜罗，结果偶然瞄到貌似大家的系统版本都是 Ubuntu 16.04.3 LTS ，为啥我的是14.03，该不会是系统版本的锅吧…然后偏不巧在我重新ssh连接上vps的时候，系统提示了一句有新版本可以使用…我再次考虑了三秒，决定搏一搏，升级看看能不能解决这个问题。就在我命令都敲好了准备回车的最后一秒，突然想到，万一没了不就很尴尬…还是做个快照备份比较妥当。最后证明我当时这三秒的思考真是太值得了。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>然后等系统升级好之后我傻眼了，文件是都还在，但是莫名其妙的帮我把Apache2打开了，结果我在浏览器输入服务器的地址，弹出来的页面一直都是Apache成启动的画面…wrng，我的Nginx呢…然后我找到Nginx的配置文件，发现文件变成初始状态了，重配之后打开发现还是不行。细细检查完确定配置无误，但是打开还是Apache2的界面…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>仔细一想这个问题其实很简单，之前没升级系统前我没有开过一次Apache2，只用Nginx来监听80端口。现在升级完系统Apache2默认打开，也是监听80端口，我估摸着应该是Apache2的战斗力比较高，把Nginx给挤掉了…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>所以我开始着手把Apache2停止，但是不知道为什么不能成功，修改监听端口后也不能成功，最后我决定卸载Apache2，反正现在暂时没用。观摩了网上的讨论发现Apache2貌似是拆迁钉子户，折腾了老半天没删干净，最后逼得我掏出了</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>rm -rf</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>然后我</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>命令打错了</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>打错了</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>我把整个var文件夹</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>删了.</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>这下我彻底什么也打不开了，网上搜罗了一下，发现撤回操作及其复杂…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>还好我，当时快照备份了</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>然后又是一番折腾，到了凌晨两点我才把这个小破站又找回来了…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>而且在重建的过程中我发现了一个问题，就是我之前添加的模板，添加错文件夹了…事实上我的WordPress是跑在var/www/html下的，但是我每次连接服务器之后习惯直接ls -a看一眼，偏不巧不知道为什么我的根目录下，也有一个wordpress的文件夹…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":142} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/image-5-1024x71.png" alt class="wp-image-142"></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>然后我每次都是直接进这个文件夹操作…</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>。。。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>妈的</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>尽早按照之前的流程添加模板，非常顺利</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>嗯，原来不是奇怪的bug，是我瞎了。。。</p><br><!-- /wp:paragraph --><p></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/12/“你真的想好好打游戏吗？”-2019-4-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wangggod">
      <meta itemprop="description" content="This is my fisrt blog to record my life and thoughts">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something for Nothing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/12/“你真的想好好打游戏吗？”-2019-4-12/" class="post-title-link" itemprop="url">你真的想好好打游戏吗？</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-12 01:25:58 / 修改时间：01:29:07" itemprop="dateCreated datePublished" datetime="2019-04-12T01:25:58+08:00">2019-04-12</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/04/12/“你真的想好好打游戏吗？”-2019-4-12/" class="leancloud_visitors" data-flag-title="你真的想好好打游戏吗？">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- wp:paragraph -->
<p></p><p>前些天谈起这一年想做的事情，当时我稍加思考便给出回答：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“其实我真的挺想去打电竞的。”</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>我身边的人大概都知道我对炉石传说的热爱。第一次接触时是高二在我哥的手机上，作为一个前三国杀资深玩家，我对于这种卡牌游戏毫无抵抗力。奈何那时候我的那部破手机实在是过于羞涩，硬是把我逼回去读书。到了大一的时候我哥因为学业繁忙，便郑重地把他的游戏账号作为成人礼交给了我，</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":127} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/image.png" alt class="wp-image-127"></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>“法爷天下第一”。他说完这句话我就成为了这个账号的新主人，得入暴雪门，无悔游人生。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>然而和大部分普通玩家一样，我最初秉承的信念一直都是“玩游戏就是为了开心”，在游戏的新手段位疯狂摩擦，完全不在乎输赢。过了大概有半年才开始想着要不认真上个分？所以17年上半年的时候我开始看炉石比赛，我想看看那些能站到舞台上的高手们是如何思考这个游戏的。只要是能在网上看到直播的比赛，无论国内国外我几乎每场都不缺席。一方面是看比赛录像，另一边也会跟着解说的思路配合上帝视角去思考每一手操作。那会每天的课其实很多，早课到晚课排满的日子一周能占到三分二以上，看比赛和自己打牌成为了那段时间我为数不多的乐趣。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>看多想多了，水平自然提升得飞快。那个时候我还没有加入新版本预购氪金的邪教，靠着自己用肝换来的金币一点点凑出了几套勉强成型的卡组从新手鱼塘一路打上了低保。看到段位标志变成绿油油的海巨人的时候我瘫在椅子上长舒了一口气，仿佛完成了重要使命。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>（找不到截图了）</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>在那之后的几个月，因为发现自己每次新赛季都能轻松上低保，也就没有再想当初那样复盘每场对局，不忘初心地回归到了最初的起点，继续快乐游戏。直到有一天我一个哥们突然问我，“你有没有想过去打打比赛”。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>怎么说呢，那只是一句很普通的话，却在我心里反复泛着涟漪。其实从我开始看比赛的时候，我就有想过，是不是自己也有一天能站到黄金公开赛的舞台上。但因为那时候我还是个鱼塘段位的混子，这种梦想说出来着实有点好笑，最终也只是想想。哥们这句话却搔得我心痒痒，就在我思考完毕准备认真回复他的时候，他又说道：</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“妈的传说都还没上呢，瞎想什么呢”。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>从那天过后我终于又找到了认真打牌的动力。在练牌这件事情上我做得像个勤奋的高中生一样，勤奋+反复+一点灵感。有时想起来就觉得有点好笑，毕竟我高三浪得飞起的人居然在一件“不正经”的事情上这么用功，很是对不起那些曾经劝着逼着我去刷题的老师们。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>终于在三个月后，我拿到了第一个传说。那天我从晚上八点就开始艰难上分，多次逼近了最终局，又被捶了回来。最后那几局我都能直接听见自己的心跳声。我让自己冷静下来，75秒的出牌时间我每回合都到最后10秒才做出选择，怕出错，更怕重新掉回去。对面是个头铁的防战，每回合打得也很细致。摩擦了10分钟后可能是上天眷顾，我的优势越滚越大，对面果断选择了投降。那瞬间我看着这个代表着游戏最高段位的图标伴随着游戏胜利的烟花声在屏幕上闪耀，甚至有一点想哭。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":128} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/cb3aba11485359147f7b32346aff59f-1024x768.jpg" alt class="wp-image-128"></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>两个月后我也真的兑现了当时自己心里的想法，当然并不是站到黄金舞台上，而是高校联赛的现场。但是那次我的表现真的很差劲，我实在是太想赢了，甚至到了比赛前我都还在犹豫用什么卡组。这导致我对于自己带的卡组信心不足，不敢打出操作，频频失误，连自己最擅长的鱼人骑也没有打出水平。说真的，那时候我想，是不是我真的不适合打比赛。没能承受住比赛的压力，没能做出最合理的counter line，沉不住气去观察对手的手牌，这些方方面面在比赛中都是致命的。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:image {"id":129} -->
<p><figure class="wp-block-image"><img src="http://106.12.124.87/wp-content/uploads/2019/04/77d43401c997d36939415011b7920eb-1024x768.jpg" alt class="wp-image-129"></figure><br><!-- /wp:image --></p>
<!-- wp:paragraph -->
<p></p><p>好在那天在现场认识了很多同样热爱搓炉石的老哥们。交流之后发现其实大家都一样，心中或多或少都有那么一个电竞梦，都梦想过自己能成为CN炉石的顶梁柱。渐渐我也开始看开，输一次比赛而已，又不丢人。炉边聚会，最重要的是开心嘛。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>有了这次经验之后，我对于打比赛的那种热切稍微平和了不少。如果说之前我所有思考的中心都是如何才能在每回合中做出最正确的抉择，现在也开始明白其实如果真的想在比赛中出成绩，心态远比牌技要重要。两者单独讲都是必要条件，但我更相信前者更宝贵。那之后的很多次我都问自己，你真的想打比赛吗？我的回答都是肯定的。很多时候我执着于此并不是我真的想靠电子竞技营生，而是因为热爱。只有在炉石中，我才能找到自己全身心投入思考的那种“心流”，那种为了一个目标燃烧起自己的热切。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>随着学业逐渐繁忙，尽管我心中还有个没有实现的电竞梦，更多时候我也得把时间交给学业上的事。我不认为那是我放弃了自己这个梦想，就像我前面说的，我想打电子竞技，不是为了营生，而是为了热爱，我想好好打游戏。每天的闲暇之余，我还是会打开炉石，我知道那个旅店的门会一直对我开放。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>有时候我也会想，可能将来的某一天我也终究会想我哥当初那样，逐渐放下对旅店火炉的眷恋，踏上新的旅程，但是我不会忘记那些日子里，每一个高呼着“炉石传说真尼玛好玩”的时刻。</p><br><!-- /wp:paragraph --><p></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/12/山雨欲来风满楼-2019-4-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wangggod">
      <meta itemprop="description" content="This is my fisrt blog to record my life and thoughts">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something for Nothing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/12/山雨欲来风满楼-2019-4-11/" class="post-title-link" itemprop="url">山雨欲来风满楼</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-12 00:33:06 / 修改时间：01:28:41" itemprop="dateCreated datePublished" datetime="2019-04-12T00:33:06+08:00">2019-04-12</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/04/12/山雨欲来风满楼-2019-4-11/" class="leancloud_visitors" data-flag-title="山雨欲来风满楼">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- wp:paragraph -->
<p></p><p>今天是我第二次踏足这个医院，坐落在市里最有名的高山背面，在这个突然酿雨的日子里。山风裹挟着细雨有些微凉，出门前特意扎的头发难免被拨弄开了几缕。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>因为和医生提前联系过了，所以就正大光明地穿过那个写着“非军人军属误入”的牌子直奔诊疗室。路过的每个房间上都有个led屏显示着当前在屋内治疗的人员名称和军衔，我脑补了一下我进去后上面会显示什么，草民吗？</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>步伐最终停在了一间门口插着一株勿忘我的房间，高老师正在里面煮着花茶。随意招呼我坐下之后她倒也没有问询什么，也许是先前父母托人联系的时候有谈过我的基本状况吧。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“花茶要泡好，其实也是一门学问”，高老师认真地将那壶从我进门就开始沸腾煮着的茶摆在了茶几上上，</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“有时候煮过头了，有时候又太随便。我们也只会去说‘太过了’、‘太早了’这样简单的是非判断。这么说确实没有错，可是为什么没有人关心，明知道烧过头了，我为什么不肯拿起来的原因呢？”</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>高老师把倒好了的茶递给了我，我盯着杯中微旋着的细碎茉莉花瓣一时语塞。这也是这段时间以来最困扰我的问题——我已经知道了如何按照这个世界的游戏规则去评价着件事情，却没有人告诉我如果没有了所谓的这些规则，我该拿什么去正视自己的内心？用什么样的标准，去衡量这一切已经既定好的善恶？</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>随后老师耐心地引导我一丝丝将从初中到现在的点点滴滴分离晾晒。有那么一瞬间，我突然想起了这段日子里那个总是会在梦里出现的自己。没有所谓的“好孩子”“优等生”“学校的骄傲”等等这些面具的束缚，那个我是那么的干净透彻，无忧无虑。我亲手把一个个外界给我的面具往他身上戴，他沉默着接受，想扭过头去却做不到，最后带着泪终于把表情都隐藏。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“你说你会习惯性害怕，不敢去尝试那些不一样的东西，你有没有想过你还害怕什么？”</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“你害怕的无非是你没满足外界的期待，你强迫自己活成一张又一张面具，你大部分的内心需求，只能通过为完成期望来偷偷实现，却变成了自我毁灭的趋向。”</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“你害怕的，是去争取自己想要的人生”</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>我喝完最后一口花茶，听完了老师的分析。我看到墙上的挂画，略显庸俗的水果图和房间内的绿色心情主题挺搭的，花茶也很好喝，空气中有淡淡的茉莉花香，唯独没有我。我看见自己漂浮在空中，挣开了所有的面具，哭着笑着。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>是我对不起你们，是我对不起你。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>对不起啊。</p><br><!-- /wp:paragraph --><p></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/10/SomethingforNothing-2019-4-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wangggod">
      <meta itemprop="description" content="This is my fisrt blog to record my life and thoughts">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something for Nothing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/10/SomethingforNothing-2019-4-10/" class="post-title-link" itemprop="url">Something for Nothing</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-10 08:55:16 / 修改时间：08:59:21" itemprop="dateCreated datePublished" datetime="2019-04-10T08:55:16+08:00">2019-04-10</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/04/10/SomethingforNothing-2019-4-10/" class="leancloud_visitors" data-flag-title="Something for Nothing">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- wp:quote {"className":"is-style-default"} -->
<p><blockquote class="wp-block-quote is-style-default"><p> <br>所有事情都会过去，被忘记，包括我，没人在乎 </p><cite>《风中有朵雨做的云》</cite></blockquote><br><!-- /wp:quote --><br><img src="https://i.imgur.com/TH4ewP1.jpg" alt></p>
<!-- wp:paragraph -->
<p></p><p>昨天在学校奔波了大半天并最终在教务处签下我的名字的那一刻起，我为期一年的休学就算开始了。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>五天前我站在学院顶楼的尽头，刚好是早课结束，楼下熙熙攘攘。在嘈杂的人声和广播台若隐若现的早间新闻中我听到对门办公室传来激烈的讨论声——“可是他成绩好”“这样对他不公平”“学校要给外界一个说法”“赶紧把事情压下去”——这些短语在我脑中拼凑不出一个完整的画面，甚至不确定他们讨论的到底是不是我。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>本想稍微凑近一些方便听得更真切，不想一转头我看到了我那张还挂着墙上的“学生干部风采照”，搭配上此刻里屋的讨论内容，画面着实充满讽刺感——一个“品学兼优”的前学生干部面临着估计是学院成立至今最莫名其妙的处分决定。我在这张照片前愣了一会，办公室的门就开了。老宋和凯哥是怎么走到我面前，又是怎么把那份沉甸甸的文件给我看的，我已经不记得了。我不敢抬头看他们，眼泪又直打转，样子活像一个锈了多年的破水龙头在漏水。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>签字，签字，换个部门继续签字，手续办完回家后我看着满屋子的行李内心空荡，然后大哭了一场。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>听了很多很多安慰我的话，也看到了患难时候没有丢下我的朋友们。我真的非常感谢你们，这一年也许很难，但是我会好好走下去，我知道你们都会等我回去。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>想起大翔以前说我总是把自己活得平庸，从小到大放弃了那么多大家都不曾有过的机会和未知的人生。我素来知道我比较怂，不敢去争取，我太害怕付出但是没有回音的选择，更害怕做出错误的选择，所以总是习惯性退缩，日渐失去了锋芒。这真的是我想要的生活吗？</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>这些夜里，那个被我伤得遍体鳞伤的自己总是会在梦里出现，我看着他，看着他，知道我没有给他想要的生活，是我给不起吗？是我做不到吗？你为什么还在这里不肯离去啊？</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>然后我总是泪流满面的醒来，在后半夜失去睡眠。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>那天中午我在KTV唱了两次平凡之路，第一次是瞎点，第二次我哭着唱完。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>“</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:verse -->
<p><pre class="wp-block-verse">我曾经毁了我的一切 只想永远地离开</pre><br><!-- /wp:verse --></p>
<!-- wp:verse -->
<p><pre class="wp-block-verse">我曾经堕入无边黑暗 想挣扎无法自拔</pre><br><!-- /wp:verse --></p>
<!-- wp:verse -->
<p><pre class="wp-block-verse">我曾经像你像他 像那野草野花</pre><br><!-- /wp:verse --></p>
<!-- wp:verse -->
<p><pre class="wp-block-verse">绝望着 也渴望着 也哭也笑平凡着</pre><br><!-- /wp:verse --></p>
<!-- wp:paragraph -->
<p></p><p>”</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>那天晚上看了《风中有朵雨做的云》。回家刷影片才知道被删掉的老A是陈冠希，他只有两局台词，都被删掉了，所以我把它写在了文章的开头。</p><br><!-- /wp:paragraph --><p></p>
<!-- wp:paragraph -->
<p></p><p>毕竟我不过像你像他，像那野草野花，都会过去。</p><br><!-- /wp:paragraph --><p></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Wangggod</p>
              <div class="site-description motion-element" itemprop="description">This is my fisrt blog to record my life and thoughts</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wangggod</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  



  




  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'NjAqJE9mAIhdnS9uQfGFgwQN-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'NjAqJE9mAIhdnS9uQfGFgwQN-gzGzoHsz',
                'X-LC-Key': 'YAtJCOUg0XDRpPFxDIJn1ekQ',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  

  

  

  

  
  	 <!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("NjAqJE9mAIhdnS9uQfGFgwQN-gzGzoHsz", "YAtJCOUg0XDRpPFxDIJn1ekQ");</script>
<script>
function showTime(Counter) {
	var query = new AV.Query(Counter);
	$(".leancloud_visitors").each(function() {
		var url = $(this).attr("id").trim();
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length == 0) {
					var content = $(document.getElementById(url)).text() + ': 0';
					$(document.getElementById(url)).text(content);
					return;
				}
				for (var i = 0; i < results.length; i++) {
					var object = results[i];
					var content = $(document.getElementById(url)).text() + ': ' + object.get('time');
					$(document.getElementById(url)).text(content);
				}
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});

	});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content = $(document.getElementById(url)).text() + ': ' + counter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = $(document.getElementById(url)).text() + ': ' + newcounter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else if ($('.post-title-link').length > 1) {
		showTime(Counter);
	}
});
</script>
  
</body>
</html>
